<?=$c["header"]?> 

<div class="right">

<!-- search_module -->
<h2 class="admin_h2" id="user"><?=$c["label"]?><span> - 検索</span></h2>
{{form action="."|page_to_url method="get" values=$c}}
	<input name="_i" value="c" type="hidden"/>
	<div class="ad_btn clearfix">
		<table class="tbl_admin search">
<? foreach ($this->filter_fields($t["fields"],"search") as $tc): ?>
			<tr>
				<th><?=$tc['label']?></th>
				<td>{{input name="<?=$tc['short_name']?>" type="<?=$tc['type']?>"<?=$tc['input_option']?><?=$tc['search_input_option']?>}}</td>
			</tr>
<? endforeach; ?>
		</table>
		<a href="javascript:void(0);" onclick="$(this).parents('form').trigger('submit');" id="search"><i class="fa fa-search"></i>検索</a>
	</div>
{{/form}}

{{*
<!-- sort_module -->
<div>
	<a href='{{"."|page_to_url|url:$c->merge_input(["_i"=>"c","sort"=>"<?=$t['pkey']?>@DESC"])}}'>登録順</a>
</div>
<!-- /sort_module -->
*}}

<!-- list_module -->
<h2 class="admin_h2" id="user"><?=$c["label"]?><span> - 一覧</span></h2>

<div class="ad_btn clearfix">
<? if ($c["usage"] != "view"): ?>
	<a href='{{".entry_form"|page_to_url}}' id="add">新規登録</a>
<? endif; /* $c["usage"] != "view" */ ?>
<? if ($c["usage"] != "form" && $c["use_csv"]): ?>
	<a href='{{".view_csv"|page_to_url}}' id="dl">CSV一括ダウンロード</a>
<? endif; /* $c["usage"] != "form" && $c["use_csv"] */ ?>
<? if ($c["usage"] != "view" && $c["use_csv"]): ?>
	<a href='{{".entry_csv_form"|page_to_url}}' id="dl">CSVインポート</a>
<? endif; /* $c["usage"] != "view" && $c["use_csv"] */ ?>
</div>

<table class="tbl_admin list">
	
	<tr>
<? foreach ($this->filter_fields($t["fields"],"list") as $tc): ?>
		<th><?=$tc['label']?></th>
<? endforeach; ?>
		<th>&nbsp;</th>
	</tr>
	{{foreach $ts as $t}}
	<tr>
<? foreach ($this->filter_fields($t["fields"],"list") as $tc): ?>
		<td>
			{{$t.<?=$tc['name']?><?=$tc['modifier']?>}}
		</td>
<? endforeach; ?>
		<td>
		
<? if ($c["usage"] != "view"): ?>
			<a href='{{".entry_form"|page_to_url|url:["id"=>$t.<?=$t["pkey"]?>]}}' class="button">編集</a>
			<a href='{{".delete"|page_to_url|url:["id"=>$t.<?=$t["pkey"]?>]}}' class="button bindConfirmDelete">削除</a>
<? endif; /* $c["usage"] != "view" */ ?>
		</td>
	</tr>
	{{/foreach}}
</table>

<div class="pager">
<p>全{{$p.total}}件中 {{$p.from}}件～{{$p.to}}件を表示</p>
<ul class="clearfix">
	{{if $p.prev !== null}}
		<li class="prev"><a href='{{"."|page_to_url|url:$c->merge_input(["_i"=>"c","offset"=>$p.prev])}}'>前</a></li>
	{{/if}}
	{{foreach $p.pages as $index => $page_offset}}
		{{if $index==$p.current}} 
			<li class="current"><a href='{{"."|page_to_url|url:$c->merge_input(["_i"=>"c","offset"=>$page_offset])}}' class="current">{{$index}}</a></li>
		{{else}}
			<li><a href='{{"."|page_to_url|url:$c->merge_input(["_i"=>"c","offset"=>$page_offset])}}'>{{$index}}</a></li>
		{{/if}}
	{{/foreach}}
	{{if $p.next !== null}}
		<li class="next"><a href='{{"."|page_to_url|url:$c->merge_input(["_i"=>"c","offset"=>$p.next])}}'>次</a></li>
	{{/if}}
</ul>
</div>
</div><!--right-->

<?=$c["footer"]?> 
