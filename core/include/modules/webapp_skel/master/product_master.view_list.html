{{$page_title="<?=$c["label"]?>：一覧"}}
<?=$c["header"]?> 

<h1 class="page_label">{{$page_title}}</h1>

{{*
<!-- search_module -->
{{form _page="." _reset="1"}}
<table class="detail">
<? foreach ($this->filter_fields($t["fields"],"search") as $tc): ?>
<tr>
	<td class="label"><nobr><?=$tc['label']?></nobr></td>
	<td class="cell">{{input name="c[<?=$tc['name']?>]" type="<?=$tc['type']?>"<?=$tc['input_option']?><?=$tc['search_input_option']?>}}</td>
</tr>
<? endforeach; ?>
<tr>
	<td class="controll_cell" colspan="2">
		{{input type="submit" value="検索" class="button"}}
		{{a _page="." _reset="1" class="button"}}リセット{{/a}}
	</td>
</tr>
</table>
{{/form}}
<!-- /search_module -->
*}}

{{*
<!-- search_crit_module -->
<div class="controll">
	検索条件
<? foreach ($this->filter_fields($t["fields"],"search") as $tc): ?>
	{{if $c->input("<?=$tc['name']?>")}}
		| <?=$tc['label']?> : {{$c->input("<?=$tc['name']?>")<?=$tc['modifier']?>}}
	{{/if}}
<? endforeach; ?>
</div>
<!-- /search_crit_module -->
*}}

{{*
<!-- sort_module -->
<div class="controll">
	{{if $c->input("sort")=="" || $c->input("sort")=="<?=$t['pkey']?>@ASC"}}
		{{a _page="." _query="c[sort]=<?=$t['pkey']?>@DESC"}}登録順▼{{/a}}
	{{elseif $c->input("sort")=="<?=$t['pkey']?>@DESC"}}
		{{a _page="." _query="c[sort]=<?=$t['pkey']?>@ASC"}}登録順▲{{/a}}
	{{else}}
		{{a _page="." _query="c[sort]=<?=$t['pkey']?>@ASC"}}登録順▽{{/a}}
	{{/if}}
<? foreach ($this->filter_fields($t["fields"],"sort") as $tc): ?>
	| 
	{{if $c->input("sort")=="<?=$tc['name']?>@ASC"}}
		{{a _page="." _query="c[sort]=<?=$tc['name']?>@DESC"}}<?=$tc['label']?>順▼{{/a}}
	{{elseif $c->input("sort")=="<?=$tc['name']?>@DESC"}}
		{{a _page="." _query="c[sort]=<?=$tc['name']?>@ASC"}}<?=$tc['label']?>順▲{{/a}}
	{{else}}
		{{a _page="." _query="c[sort]=<?=$tc['name']?>@ASC"}}<?=$tc['label']?>順▽{{/a}}
	{{/if}}
<? endforeach; ?>
</div>
<!-- /sort_module -->
*}}

<!-- controll_module -->
<div class="controll">
<? if ($c["usage"] != "view"): ?>
	{{a _page=".entry_form" class="button"}}新規登録{{/a}}
<? endif; /* $c["usage"] != "view" */ ?>
<? if ($c["usage"] != "form" && $c["use_csv"]): ?>
	{{a _page=".view_csv" class="button"}}CSV一括ダウンロード{{/a}}
<? endif; /* $c["usage"] != "form" && $c["use_csv"] */ ?>
<? if ($c["usage"] != "view" && $c["use_csv"]): ?>
	{{a _page=".entry_csv_form" class="button"}}CSV一括インポート{{/a}}
<? endif; /* $c["usage"] != "view" && $c["use_csv"] */ ?>
</div>
<!-- /controll_module -->

<!-- list_module -->
<div class="list_wrap">
<table class="list">
<tr>
	<td class="label">
		&nbsp;
	</td>
<? foreach ($this->filter_fields($t["fields"],"list") as $tc): ?>
	<td class="label">
		<nobr><?=$tc['label']?></nobr>
	</td>
<? endforeach; ?>
</tr>
{{foreach $ts as $t}}
	<tr>
		<td class="cell menu">
			<nobr>
			{{* {{a _page=".view_detail" _id=$t.<?=$t['pkey']?> class="button"}}詳細{{/a}} *}}
<? if ($c["usage"] != "view"): ?>
			{{a _page=".entry_form" _id=$t.<?=$t['pkey']?> class="button"}}編集{{/a}}
			{{a _page=".delete_confirm" _id=$t.<?=$t['pkey']?> class="button bindConfirmDelete"}}削除{{/a}}
<? endif; /* $c["usage"] != "view" */ ?>
			</nobr>
		</td>
<? foreach ($this->filter_fields($t["fields"],"list") as $tc): ?>
		<td class="cell">
			{{$t.<?=$tc['name']?><?=$tc['modifier']?>}}
		</td>
<? endforeach; ?>
	</tr>
{{/foreach}}
</table>
</div>
<!-- /list_module -->

<!-- pager_module -->
<div class="pager">
<span class="inactive">{{$p.current}} / {{$p.lastpage}}ページを表示中&nbsp;</span>
{{if $p.prev !== null}}
	{{a _page="." _query="c[offset]=`$p.prev`"}}前へ{{/a}}
{{else}}
	<span class="inactive">前へ</span>
{{/if}}
{{foreach from=$p.pages key="index" item="page_offset"}}
	{{if $index==$p.current}} 
		{{a _page="." _query="c[offset]=`$page_offset`" class="current"}}{{$index}}{{/a}}
	{{else}}
		{{a _page="." _query="c[offset]=`$page_offset`"}}{{$index}}{{/a}}
	{{/if}}
{{/foreach}}
{{if $p.next !== null}}
	{{a _page="." _query="c[offset]=`$p.next`"}}次へ{{/a}}
{{else}}
	<span class="inactive">次へ</span>
{{/if}}
</div>
<!-- /pager_module -->

<?=$c["footer"]?> 