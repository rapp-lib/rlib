<?php
    $var_name = $o["var_name"] ?: '$t';
    $name = $col->getName();
?>
<?php if ($col->getAttr("type")=="assoc"): ?>
<?="\n"?>
                    {{foreach <?=$var_name?>.<?=$name?> as $key=>$item}}
                        <table class="tbl_admin detail">
<?php   foreach ($col->getAssocTable()->getInputCols() as $assoc_col): ?>
<?php       if ($assoc_col->getAttr("type")==="assoc") continue; ?>
                        <tr>
                            <th><?=$assoc_col->getLabel()?></th>
                            <td><?=$assoc_col->getShowSource(array("var_name"=>$var_name.".".$name.'[$key]'))?></td>
                        </tr>
<?php   endforeach; /* foreach as $assoc_col */ ?>
                        </table>
                    {{/foreach}}
                <?=""?>
<?php elseif ($col->getAttr("type")=="file"): /* if type=="assoc" */ ?>
{{if <?=$var_name?>.<?=$name?>}}<a href="{{<?=$var_name?>.<?=$name?>}}" target="_blank">ファイル</a>{{/if}}<?=""?>
<?php elseif ($enum_set = $col->getEnumSet()): /* if type=="assoc" */ ?>
<?php   if ($col->getAttr("type")=="checklist"): ?>
{{<?=$var_name?>.<?=$name?>|map:$enum["<?=$enum_set->getFullName()?>":" "]}}<?=""?>
<?php   else: /* if type=="checklist" */ ?>
{{$enum["<?=$enum_set->getFullName()?>"][<?=$var_name?>.<?=$name?>]}}<?=""?>
<?php   endif; /* if type=="checklist" */ ?>
<?php elseif ($col->getAttr("type")=="password"): /* if type=="assoc" */ ?>
********<?=""?>
<?php else: /* if type=="assoc" */ ?>
{{<?=$var_name?>.<?=$name?>
<?php if ($col->getAttr("type")=="date"): ?>|date:"Y/m/d"<?php endif; ?>
<?php if ($col->getAttr("type")=="datetime"): ?>|date:"Y/m/d H:i"<?php endif; ?>
<?php if ($col->getAttr("type")=="time"): ?>|date:"H:i"<?php endif; ?>
}}<?=""?>
<?php endif; /* if type=="assoc" */ ?>
