{{if $forms.entry->getErrors()}}
    <div class="errmsg">※入力エラーがあります</div>
    {{*
    {{foreach $forms.entry->getErrors() as $error}}
        <p class="errmsg">{{$forms.entry->getFieldLabel($error["field_name"])}} : {{$error["message"]}}</p>
    {{/foreach}}
    *}}
    {{script require=["jquery", "app.show-errors"]}}
        $(function(){
            showErrors({
                errors: {{$forms.entry->getErrors()|json_encode nofilter}},
                $form: $("form.form-entry")
            });
        });
    {{/script}}
{{/if}}

{{form action='.'|page_to_url enctype="multipart/form-data" method="post" form=$forms.entry class="form-entry"}}
<?php if ($controller->getAttr("type")==="master"): ?>
{{input name="id" type="hidden"}}
<?php endif; ?>
<table class="tbl detail">
<?php foreach ($controller->getInputCols() as $col): ?>
    <tr>
        <th><?=$col->getLabel()?></th>
        <td class="input-block"><?=$col->getInputSource(array("is_edit"=>$controller->getAttr("type")==="master"))?></td>
    </tr>
<?php endforeach; /* foreach as $col */ ?>
</table>
<div class="btn-area">
    <a href='{{"<?=$pageset->getBackPage()->getFullPage($page)?>"|page_to_url:["back"=>1]}}' class="back-btn">戻る</a>
    <div class="right clearfix">
        <button type="submit" class="primary-btn">確認</button>
    </div>
</div>
{{/form}}